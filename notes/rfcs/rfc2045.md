# MIME

MIME = Multipurpose Internet Mail Extensions 
\\
This talks about how to format Emails - especially so in a space where different line endings are handled differently on each operating system (/lf, /cr, /n, /cr/lf, /crlf etc...)

## Key Parts that I needed:

- Content-Type syntax
- Line Endings & Line Breaks

### Content-Type syntax

header := "Content-Type", ":" [type] "/" [subtype] \\
\\
type := [discrete-type] | [composite-type] \\
\\
discrete-type := "text" | "image" | "audio" | "video" | "application" | [extension-token] \\
composite-type := "message" | "multipart" | [extension-token] \\
\\
extension-token := [ietf-token] | [x-token] \\
\\
ietf-token := <An extension token defined by a standards-track RFC and registered with IANA.> \\
x-token := <The two characters "X-" or "x-" followed, with no intervening white space, by any token> \\
\\
\\
subtype := [extension-token] | [iana-token] \\
\\
extension-token := {defined above} \\
\\
iana-token := <A publicly-defined extension token. Tokens of this form must be registered with IANA as specified in RFC 2048.>

### Line Breaks

CRLF in MIME:
- CRLF means the octet sequence `13 10` (`\r\n`).
- MIME line separation is CRLF, consistent with RFC 821/822.
- A "line" here is a protocol unit, not necessarily a visual line in a UI.

Data classes and line rules:
- `7bit` and `8bit` data both require CR and LF to appear only as CRLF line separators.
- `7bit` and `8bit` also keep line length to `<= 998` octets between CRLF separators.
- `binary` data has no such line structure restriction.

Quoted-Printable line behavior:
- For text data, a hard line break in canonical form is represented as a real CRLF in quoted-printable.
- Soft line breaks are represented by `=` at end of encoded line, then CRLF.
- Quoted-Printable encoded lines must be `<= 76` characters (not counting trailing CRLF).
- In non-text data, line break bytes are data (`=0D`, `=0A`, etc.), not meaningful hard line breaks.
- Trailing SPACE/TAB at encoded line end is unsafe; decoders should strip trailing whitespace.

Base64 line behavior:
- Base64 output must be wrapped to lines of no more than `76` characters.
- Decoders ignore line breaks and other non-table chars, though that can indicate transport issues.
- If text is encoded directly, line breaks should be converted to canonical CRLF before base64 encoding.

Quoted-Printable <-> Base64 conversion:
- A quoted-printable hard line break maps to canonical CRLF and must stay CRLF when converting to base64.
- Converting base64 back to quoted-printable: canonical CRLF becomes quoted-printable hard line breaks for text data only.

RFC sections used: `2.1`, `2.7`, `2.8`, `2.9`, `2.10`, `6.5`, `6.7`, `6.8`.

## Other Interesting things that I learned:

- 76 characters is due to the average sizing of terminals in terms of characters.
- The handling of soft line breaks can cause issues or corruptions when migrating between versions
\\
-- see: epstien files